<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper SYSTEM "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.buba.hospital_back.mapper.SecUserMapper">
    <!--
       //查看用户信息
      SecUser loadUserInfo(String mobile);
      -->
    <select id="loadUserInfo" resultType="com.buba.hospital_back.bean.SecUser">
            select * from sec_user where phone=#{mobile}
    </select>

    <!--
     //查询权限列表
    List<SecRes> selectRoleRes(Integer id);
    -->
    <select id="selectRoleRes" resultType="com.buba.hospital_back.bean.SecRes">
            select sr2.* from sec_user su,sec_role sr,sec_role_res srr,sec_res sr2
            where su.role_id=sr.id
            and sr.id=srr.role_id
            and sr2.id=srr.res_id
            and su.id=#{id}
    </select>
    <!--
     //根据权限获取医院列表
     List<SecHospital> getOfHospital();
    -->
    <select id="getOfHospital" resultType="com.buba.hospital_back.bean.SecHospital">
            select * from sec_hospital
    </select>
    <!--
     List<SecHospital> getOfHospitalById(Integer id);
    -->
    <select id="getOfHospitalById" resultType="com.buba.hospital_back.bean.SecHospital">
            select sh.* from sec_hospital sh,sec_hospital_relation shr ,sec_user su
            where sh.id=shr.hospital_id
            and shr.admin_id=su.id
            and su.id=#{id}
    </select>

</mapper>
